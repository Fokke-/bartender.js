"use strict";function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}var OffCanvas=function(){function t(e){_classCallCheck(this,t),this.options=_extends({debug:!1,overlay:!0,mainWrapSelector:".offcanvas-main",contentWrapSelector:".offcanvas-content",openButtonSelector:".offcanvas-open",closeButtonSelector:".offcanvas-close",toggleButtonSelector:".offcanvas-toggle"},e),this.overlay=null,this.mainWrap=document.querySelector(this.options.mainWrapSelector),this.contentWrap=document.querySelector(this.options.contentWrapSelector),this.openButtons=document.querySelectorAll(this.options.openButtonSelector),this.closeButtons=document.querySelectorAll(this.options.closeButtonSelector),this.toggleButtons=document.querySelectorAll(this.options.toggleButtonSelector),this.bars={left:null,right:null,top:null,bottom:null},this.init()}return _createClass(t,[{key:"log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log("Off-canvas: "+t)}},{key:"logError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.error("Off-canvas: "+t)}},{key:"debug",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.options.debug&&console.log("Off-canvas debug: "+t)}},{key:"init",value:function(){var t=this;try{if(!this.mainWrap)throw"Main wrap element was not found with selector: "+this.options.mainWrapSelector;if(!this.contentWrap)throw"Content wrap element was not found with selector: "+this.options.contentWrapSelector;this.mainWrap.classList.add("offcanvas-main"),this.contentWrap.classList.add("offcanvas-content"),this.openButtons.forEach((function(e){var o=e.getAttribute("data-offcanvas-bar")||"left";t.isValidPosition(o)?(e.addEventListener("click",(function(){return t.open(o)})),e.addEventListener("keydown",(function(e){[13,32].indexOf(e.keyCode)>-1&&(e.preventDefault(),t.open(o))}))):t.logError("Open button has invalid bar position '"+o+"' defined. Use one of the following values: left, right, top, bottom")})),this.closeButtons.forEach((function(e){e.addEventListener("click",(function(){return t.close()})),e.addEventListener("keydown",(function(e){[13,32].indexOf(e.keyCode)>-1&&(e.preventDefault(),t.close())}))})),this.options.overlay&&!this.overlay&&(this.overlay=document.createElement("div"),this.overlay.classList.add("offcanvas-overlay"),this.overlay.addEventListener("click",(function(){return t.close()})),this.overlay.addEventListener("keydown",(function(e){[13,32].indexOf(e.keyCode)>-1&&(e.preventDefault(),t.close())})),this.contentWrap.appendChild(this.overlay)),console.log(this)}catch(t){this.logError(t)}}},{key:"isValidPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return["left","right","top","bottom"].includes(t)}},{key:"addBar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!this.isValidPosition(t))throw"Invalid bar position '"+t+"'. Use one of the following values: left, right, top, bottom";if(this.bars[t])throw"Bar with position '"+t+"' is already defined";var o=new OffCanvasBar(e);o.parentElement=this.mainWrap,o.position=t,o.init(),this.bars[t]=o,this.debug("Added bar with position '"+t+"'")}catch(t){this.logError(t)}return this}},{key:"open",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if(!this.isValidPosition(t))throw"Invalid bar position '"+t+"'. Use one of the following values: left, right, top, bottom";var e=this.bars[t];if(!e)throw"Bar with position '"+t+"' is not defined";if(e.element.classList.contains("offcanvas-bar--open"))return;if(this.close(),e.element.classList.add("offcanvas-bar--open"),this.debug("Opening bar '"+t+"'"),e.options.mode&&"push"==e.options.mode){switch(e.position){case"left":this.contentWrap.style.transform="translateX("+e.element.offsetWidth+"px)",this.mainWrap.style.overflowX="hidden";break;case"right":this.contentWrap.style.transform="translateX(-"+e.element.offsetWidth+"px)",this.mainWrap.style.overflowX="hidden";break;case"top":this.contentWrap.style.transform="translateY("+e.element.offsetHeight+"px)",this.mainWrap.style.overflowY="hidden";break;case"bottom":this.contentWrap.style.transform="translateY(-"+e.element.offsetHeight+"px)",this.mainWrap.style.overflowY="hidden"}}this.showOverlay()}catch(t){this.logError(t)}return this}},{key:"close",value:function(){var t=this;try{Object.keys(this.bars).forEach((function(e){var o=t.bars[e];if(!o)throw"Bar with position '"+e+"' is not defined";o.element.classList.contains("offcanvas-bar--open")&&(o.element.classList.remove("offcanvas-bar--open"),t.debug("Closing bar '"+e+"'"))})),this.contentWrap.style.transform=null,this.mainWrap.style.overflowX=null,this.mainWrap.style.overflowY=null,this.hideOverlay()}catch(t){this.logError(t)}return this}},{key:"showOverlay",value:function(){this.overlay&&(this.overlay.classList.contains("offcanvas-overlay--visible")||(this.debug("Showing overlay"),this.overlay.classList.add("offcanvas-overlay--visible")))}},{key:"hideOverlay",value:function(){this.overlay&&this.overlay.classList.contains("offcanvas-overlay--visible")&&(this.debug("Hiding overlay"),this.overlay.classList.remove("offcanvas-overlay--visible"))}}]),t}(),OffCanvasBar=function(){function t(e){_classCallCheck(this,t),this.options=_extends({selector:"",focusableElementSelector:'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',mode:"float"},e),this.parentElement=null,this.element=null,this.position=null}return _createClass(t,[{key:"isValidMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return["float","push","slide"].includes(t)}},{key:"init",value:function(){if(!this.position)throw"Missing position for bar";if(!this.parentElement)throw"Missing parent element for bar with position '"+this.position+"'";if(!this.options.selector)throw"Missing element selector for bar with position '"+this.position+"'";if(this.element=this.parentElement.querySelector(this.options.selector),!this.element)throw"Bar element was not found with selector: "+this.options.selector;if(!this.isValidMode(this.options.mode))throw"Invalid mode '"+this.options.mode+"' for bar '"+this.position+"'. Use one of the following values: float, push, slide.";return this.element.classList.add("offcanvas-bar"),this.element.setAttribute("data-offcanvas-bar-position",this.position),this}}]),t}();
//# sourceMappingURL=offcanvas.js.map
