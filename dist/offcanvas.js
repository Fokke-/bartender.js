"use strict";function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var OffCanvas=function(){function t(e){_classCallCheck(this,t),this.options=_extends({debug:!1,overlay:!0,closeOnEsc:!0,mainWrapSelector:".offcanvas-main",contentWrapSelector:".offcanvas-content"},e),this.overlay=null,this.currentOpenBar=null,this.previousOpenButton=null,this.resizeTimeout=null,this.bars=[],this.init()}return _createClass(t,[{key:"log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log("Off-canvas: "+t)}},{key:"logError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.error("Off-canvas: "+t)}},{key:"debug",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.options.debug&&console.log("Off-canvas debug: "+t)}},{key:"init",value:function(){var t,e,n=this;try{if(this.mainWrap=document.querySelector(this.options.mainWrapSelector),!this.mainWrap)throw"Main wrap element was not found with selector: "+this.options.mainWrapSelector;if(this.contentWrap=this.mainWrap.querySelector(this.options.contentWrapSelector),!this.contentWrap)throw"Content wrap element was not found with selector: "+this.options.contentWrapSelector;for(var i=this.mainWrap.querySelectorAll("[data-offcanvas-bar]"),o=0;o<i.length;o++)e=i[o],n.addBar(e);this.openButtons=this.mainWrap.querySelectorAll("[data-offcanvas-open]"),this.closeButtons=this.mainWrap.querySelectorAll("[data-offcanvas-close]"),this.toggleButtons=this.mainWrap.querySelectorAll("[data-offcanvas-toggle]"),this.mainWrap.classList.add("offcanvas-main"),this.contentWrap.classList.add("offcanvas-content");for(var s=this.openButtons,r=function(t){var e=t.getAttribute("data-offcanvas-open");n.isValidPosition(e)?(t.addEventListener("click",(function(){return n.open(e,t)})),t.addEventListener("keydown",(function(i){[13,32].indexOf(i.keyCode)>=0&&(i.preventDefault(),n.open(e,t))}))):n.logError("Open button has invalid bar position '"+e+"' defined. Use one of the following values: left, right, top, bottom")},a=0;a<s.length;a++)r(s[a]);for(var l=this.toggleButtons,h=function(t){var e=t.getAttribute("data-offcanvas-toggle");n.isValidPosition(e)?(t.addEventListener("click",(function(){return n.toggle(e,t)})),t.addEventListener("keydown",(function(i){[13,32].indexOf(i.keyCode)>=0&&(i.preventDefault(),n.toggle(e,t))}))):n.logError("Toggle button has invalid bar position '"+e+"' defined. Use one of the following values: left, right, top, bottom")},c=0;c<l.length;c++)h(l[c]);for(var u=this.closeButtons,f=0;f<u.length;f++)(t=u[f]).addEventListener("click",(function(){return n.close()})),t.addEventListener("keydown",(function(t){[13,32].indexOf(t.keyCode)>=0&&(t.preventDefault(),n.close())}));this.options.overlay&&!this.overlay&&(this.overlay=document.createElement("div"),this.overlay.classList.add("offcanvas-overlay"),this.overlay.addEventListener("click",(function(){return n.close()})),this.overlay.addEventListener("keydown",(function(t){[13,32].indexOf(t.keyCode)>=0&&(t.preventDefault(),n.close())})),this.contentWrap.appendChild(this.overlay)),this.options.closeOnEsc&&window.addEventListener("keydown",(function(t){27===t.keyCode&&(t.preventDefault(),n.close())})),window.addEventListener("resize",(function(){clearTimeout(n.resizeTimeout),n.resizeTimeout=setTimeout((function(){n.setContentWrapPush()}),200)}))}catch(t){this.logError(t)}return this}},{key:"isValidPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return["left","right","top","bottom"].indexOf(t)>=0}},{key:"addBar",value:function(t){try{var e=t.getAttribute("data-offcanvas-bar"),n=t.getAttribute("data-offcanvas-bar-mode");if(!this.mainWrap||!this.contentWrap)return this;if(!this.isValidPosition(e))throw"Invalid bar position '"+e+"'. Use one of the following values: left, right, top, bottom";if(this.bars[e])throw"Duplicate bar with position '"+e+"'";var i=new OffCanvasBar;i.element=t,i.parentElement=this.mainWrap,i.position=e,n&&(i.mode=n),i.init(),this.bars[e]=i,this.debug("Added bar '"+i.position+"' with mode '"+i.mode+"'")}catch(t){this.logError(t)}return this}},{key:"open",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!this.isValidPosition(t))throw"Invalid bar position '"+t+"'. Use one of the following values: left, right, top, bottom";var n=this.bars[t];if(!n)throw"Bar with position '"+t+"' is not defined";if(n.element.classList.contains("offcanvas-bar--open"))return;this.close(),this.debug("Opening bar '"+t+"'"),n.open(),this.currentOpenBar=n,this.setContentWrapPush(),this.previousOpenButton=e,this.showOverlay()}catch(t){this.logError(t)}return this}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!this.isValidPosition(t))throw"Invalid bar position '"+t+"'. Use one of the following values: left, right, top, bottom";this.currentOpenBar&&this.currentOpenBar.position==t?this.close():(this.close(),this.open(t,e))}catch(t){this.logError(t)}return this}},{key:"close",value:function(){try{if(!this.currentOpenBar)return;this.debug("Closing bar '"+this.currentOpenBar.position+"'"),this.currentOpenBar.close(),this.previousOpenButton&&(this.previousOpenButton.focus(),this.previousOpenButton=null),this.currentOpenBar=null,this.contentWrap.style.removeProperty("transform"),this.mainWrap.style.removeProperty("overflow"),this.hideOverlay()}catch(t){this.logError(t)}return this}},{key:"setContentWrapPush",value:function(){if(this.currentOpenBar&&this.currentOpenBar.mode&&(this.mainWrap.style.overflow="hidden",["push","slide"].indexOf(this.currentOpenBar.mode)>=0))switch(this.currentOpenBar.position){case"left":this.contentWrap.style.transform="translateX("+this.currentOpenBar.element.offsetWidth+"px)";break;case"right":this.contentWrap.style.transform="translateX(-"+this.currentOpenBar.element.offsetWidth+"px)";break;case"top":this.contentWrap.style.transform="translateY("+this.currentOpenBar.element.offsetHeight+"px)";break;case"bottom":this.contentWrap.style.transform="translateY(-"+this.currentOpenBar.element.offsetHeight+"px)"}}},{key:"showOverlay",value:function(){this.overlay&&(this.overlay.classList.contains("offcanvas-overlay--visible")||(this.debug("Showing overlay"),this.overlay.classList.add("offcanvas-overlay--visible")))}},{key:"hideOverlay",value:function(){this.overlay&&this.overlay.classList.contains("offcanvas-overlay--visible")&&(this.debug("Hiding overlay"),this.overlay.classList.remove("offcanvas-overlay--visible"))}}]),t}(),OffCanvasBar=function(){function t(){_classCallCheck(this,t),this.parentElement=null,this.element=null,this.position=null,this.mode="float",this.focusableElementSelector='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'}return _createClass(t,[{key:"init",value:function(){if(!this.position)throw"Missing position for bar";if(!this.parentElement)throw"Missing parent element for bar '"+this.position+"'";if(!this.element)throw"Bar element for '"+this.position+"' was not found!";if(["float","push","slide"].indexOf(this.mode)<0)throw"Invalid mode '"+this.mode+"' for bar '"+this.position+"'. Use one of the following values: float, push, slide.";return this.disableFocus(),this}},{key:"disableFocus",value:function(){for(var t=this.element.querySelectorAll(this.focusableElementSelector),e=0;e<t.length;e++)t[e].setAttribute("tabindex","-1");return this.element.setAttribute("tabindex","-1"),this.element.setAttribute("aria-hidden","true"),this}},{key:"enableFocus",value:function(){for(var t=this.element.querySelectorAll(this.focusableElementSelector),e=0;e<t.length;e++)t[e].removeAttribute("tabindex");return this.element.removeAttribute("aria-hidden"),this.element.setAttribute("tabindex","0"),this.element.focus(),this}},{key:"open",value:function(){return this.enableFocus(),this.element.classList.add("offcanvas-bar--open"),this}},{key:"close",value:function(){return this.disableFocus(),this.element.classList.remove("offcanvas-bar--open"),this}}]),t}();
//# sourceMappingURL=offcanvas.js.map
