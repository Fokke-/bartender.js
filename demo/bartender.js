"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Bartender=function(){function e(t){_classCallCheck(this,e),this.options=_extends({debug:!1,overlay:!0,closeOnEsc:!0,mainWrapSelector:".bartender-main",contentWrapSelector:".bartender-content",readyClass:"bartender-ready",openClass:"bartender-open"},t),this.overlay=null,this.currentOpenBar=null,this.previousOpenButton=null,this.resizeTimeout=null,this.bars={},this.openButtons=[],this.closeButtons=[],this.toggleButtons=[],this.pushElements=[],this.init()}return _createClass(e,[{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log("Bartender: "+e)}},{key:"logError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.error("Bartender: "+e)}},{key:"debug",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.options.debug&&console.log("Bartender debug: "+e)}},{key:"init",value:function(){var e,t,n=this;try{if(this.mainWrap=document.querySelector(this.options.mainWrapSelector),!this.mainWrap)throw"Main wrap element was not found with selector: "+this.options.mainWrapSelector;if(this.contentWrap=this.mainWrap.querySelector(this.options.contentWrapSelector),!this.contentWrap)throw"Content wrap element was not found with selector: "+this.options.contentWrapSelector;this.openButtons=this.mainWrap.querySelectorAll("[data-bartender-open]"),this.closeButtons=this.mainWrap.querySelectorAll("[data-bartender-close]"),this.toggleButtons=this.mainWrap.querySelectorAll("[data-bartender-toggle]"),this.mainWrap.classList.add("bartender-main"),this.contentWrap.classList.add("bartender-content");for(var i=this.mainWrap.querySelectorAll("[data-bartender-bar]"),r=0;r<i.length;r++)t=i[r],n.addBar(t);if(!Object.keys(this.bars).length)throw"Cannot find any bars.";for(var s=this.openButtons,o=function(e){var t=e.getAttribute("data-bartender-open");n.isValidPosition(t)?(e.setAttribute("aria-expanded","false"),e.addEventListener("click",(function(i){n.open(t,e)})),e.addEventListener("keydown",(function(i){[13,32].indexOf(i.keyCode)>=0&&n.open(t,e)}))):n.logError("Open button has invalid bar position '"+t+"' defined. Use one of the following values: left, right, top, bottom")},a=0;a<s.length;a++)o(s[a]);for(var l=this.toggleButtons,h=function(e){var t=e.getAttribute("data-bartender-toggle");n.isValidPosition(t)?(e.setAttribute("aria-expanded","false"),e.addEventListener("click",(function(i){n.toggle(t,e)})),e.addEventListener("keydown",(function(i){[13,32].indexOf(i.keyCode)>=0&&n.toggle(t,e)}))):n.logError("Toggle button has invalid bar position '"+t+"' defined. Use one of the following values: left, right, top, bottom")},u=0;u<l.length;u++)h(l[u]);for(var d=this.closeButtons,c=0;c<d.length;c++)(e=d[c]).addEventListener("click",(function(e){n.close()})),e.addEventListener("keydown",(function(e){[13,32].indexOf(e.keyCode)>=0&&n.close()}));this.pushElements=this.mainWrap.querySelectorAll("[data-bartender-push]"),this.pushElements.length&&this.debug("Registered "+this.pushElements.length+" pushable elements."),this.options.overlay&&!this.overlay&&(this.overlay=document.createElement("div"),this.overlay.classList.add("bartender-overlay"),this.overlay.addEventListener("click",(function(){return n.close()})),this.overlay.addEventListener("keydown",(function(e){[13,32].indexOf(e.keyCode)>=0&&(e.preventDefault(),n.close())})),this.contentWrap.appendChild(this.overlay)),this.options.closeOnEsc&&window.addEventListener("keydown",(function(e){27===e.keyCode&&(e.preventDefault(),n.close())})),window.addEventListener("resize",(function(){clearTimeout(n.resizeTimeout),n.resizeTimeout=setTimeout((function(){n.setPush()}),200)})),this.mainWrap.classList.add(this.options.readyClass)}catch(e){this.logError(e)}return this}},{key:"isValidPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return["left","right","top","bottom"].indexOf(e)>=0}},{key:"addBar",value:function(e){try{var t=e.getAttribute("data-bartender-bar");if(!this.mainWrap||!this.contentWrap)return this;if(!this.isValidPosition(t))throw"Invalid bar position '"+t+"'. Use one of the following values: left, right, top, bottom";if(this.bars[t])throw"Duplicate bar with position '"+t+"'";var n=new BartenderBar;n.element=e,n.init(),this.bars[t]=n,this.debug("Added bar '"+t+"' with mode '"+n.mode+"'")}catch(e){this.logError(e)}return this}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!this.isValidPosition(e))throw"Invalid bar position '"+e+"'. Use one of the following values: left, right, top, bottom";var n=this.bars[e];if(!n)throw"Bar with position '"+e+"' is not defined. Use one of the following: "+Object.keys(this.bars).join(", ")+".";if(n.element.classList.contains("bartender-bar--open"))return;this.close(),this.debug("Opening bar '"+e+"'"),n.enableFocus(),n.element.classList.add("bartender-bar--open"),this.currentOpenBar=n,this.setPush(),this.mainWrap.classList.add(this.options.openClass),this.previousOpenButton=t,t&&t.setAttribute("aria-expanded",!0),this.showOverlay(),this.mainWrap.dispatchEvent(new CustomEvent("open",{detail:{bar:n,button:t}}))}catch(e){this.logError(e)}return this}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!this.isValidPosition(e))throw"Invalid bar position '"+e+"'. Use one of the following values: left, right, top, bottom";this.currentOpenBar&&this.currentOpenBar.position==e?this.close():(this.close(),this.open(e,t))}catch(e){this.logError(e)}return this}},{key:"close",value:function(){try{if(!this.currentOpenBar)return;this.debug("Closing bar '"+this.currentOpenBar.position+"'"),this.currentOpenBar.disableFocus(),this.currentOpenBar.element.classList.remove("bartender-bar--open"),this.previousOpenButton&&(this.previousOpenButton.focus(),this.previousOpenButton.setAttribute("aria-expanded","false"),this.previousOpenButton=null),this.contentWrap.style.removeProperty("transform"),this.mainWrap.style.removeProperty("overflow");for(var e=this.pushElements,t=0;t<e.length;t++)e[t].style.removeProperty("transform");this.mainWrap.classList.remove(this.options.openClass),this.hideOverlay(),this.mainWrap.dispatchEvent(new CustomEvent("close",{detail:{bar:this.currentOpenBar}})),this.currentOpenBar=null}catch(e){this.logError(e)}return this}},{key:"setPush",value:function(){if(this.currentOpenBar&&this.currentOpenBar.mode){var e=null;switch(this.mainWrap.style.overflow="hidden",this.currentOpenBar.position){case"left":e="translateX("+this.currentOpenBar.element.offsetWidth+"px)";break;case"right":e="translateX(-"+this.currentOpenBar.element.offsetWidth+"px)";break;case"top":e="translateY("+this.currentOpenBar.element.offsetHeight+"px)";break;case"bottom":e="translateY(-"+this.currentOpenBar.element.offsetHeight+"px)"}["push","slide"].indexOf(this.currentOpenBar.mode)>=0&&(this.contentWrap.style.transform=e);for(var t=this.pushElements,n=0;n<t.length;n++)t[n].style.transform=e}}},{key:"showOverlay",value:function(){this.overlay&&(this.overlay.classList.contains("bartender-overlay--visible")||(this.debug("Showing overlay"),this.overlay.classList.add("bartender-overlay--visible")))}},{key:"hideOverlay",value:function(){this.overlay&&this.overlay.classList.contains("bartender-overlay--visible")&&(this.debug("Hiding overlay"),this.overlay.classList.remove("bartender-overlay--visible"))}}]),e}(),BartenderBar=function(){function e(){_classCallCheck(this,e),this.element=null,this.position=null,this.mode="float",this.focusableElementSelector='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'}return _createClass(e,[{key:"init",value:function(){if(!this.element)throw"Bar element for '"+this.position+"' was not found!";if(this.position=this.element.getAttribute("data-bartender-bar"),!this.position)throw"Missing position for bar";if(this.element.getAttribute("data-bartender-bar-mode")&&(this.mode=this.element.getAttribute("data-bartender-bar-mode")),["float","push","slide"].indexOf(this.mode)<0)throw"Invalid mode '"+this.mode+"' for bar '"+this.position+"'. Use one of the following values: float, push, slide.";return this.disableFocus(),this}},{key:"disableFocus",value:function(){for(var e=this.element.querySelectorAll(this.focusableElementSelector),t=0;t<e.length;t++)e[t].setAttribute("tabindex","-1");return this.element.setAttribute("tabindex","-1"),this.element.setAttribute("aria-hidden","true"),this}},{key:"enableFocus",value:function(){for(var e=this.element.querySelectorAll(this.focusableElementSelector),t=0;t<e.length;t++)e[t].removeAttribute("tabindex");return this.element.removeAttribute("aria-hidden"),this.element.setAttribute("tabindex","0"),this.element.focus(),this}}]),e}();
//# sourceMappingURL=bartender.js.map
